version: '3.8'

services:
  inflation-app:
    # Build from the current root directory using the main Dockerfile
    build: 
      context: .
      dockerfile: Dockerfile
    
    container_name: inflation-app-container
    
    # Expose BOTH ports (FastAPI & Streamlit) from the single container
    ports:
      - "8000:8000"  # Backend
      - "8501:8501"  # Frontend
      
    # Environment variables
    environment:
      - PORT=8501
      # Note: We don't need BACKEND_URL here because they are in the same container
      # The frontend code already talks to 'http://localhost:8000'